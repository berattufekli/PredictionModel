// This file was auto-generated by ML.NET Model Builder.
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Microsoft.ML.Data;
using Microsoft.ML.Trainers.FastTree;
using Microsoft.ML.Trainers;
using Microsoft.ML;

namespace ML_PredictionModel
{
    public partial class MLModel1
    {
        /// <summary>
        /// Retrains model using the pipeline generated as part of the training process. For more information on how to load data, see aka.ms/loaddata.
        /// </summary>
        /// <param name="mlContext"></param>
        /// <param name="trainData"></param>
        /// <returns></returns>
        public static ITransformer RetrainPipeline(MLContext mlContext, IDataView trainData)
        {
            var pipeline = BuildPipeline(mlContext);
            var model = pipeline.Fit(trainData);
            return model;
        }

        /// <summary>
        /// build the pipeline that is used from model builder. Use this function to retrain model.
        /// </summary>
        /// <param name="mlContext"></param>
        /// <returns></returns>
        public static IEstimator<ITransformer> BuildPipeline(MLContext mlContext)
        {
            // Data process configuration with pipeline data transformations
            var pipeline = mlContext.Transforms.ReplaceMissingValues(new []{new InputOutputColumnPair(@"input1", @"input1"),new InputOutputColumnPair(@"input2", @"input2"),new InputOutputColumnPair(@"input3", @"input3"),new InputOutputColumnPair(@"input4", @"input4"),new InputOutputColumnPair(@"input5", @"input5"),new InputOutputColumnPair(@"input6", @"input6"),new InputOutputColumnPair(@"input7", @"input7"),new InputOutputColumnPair(@"input8", @"input8"),new InputOutputColumnPair(@"input9", @"input9"),new InputOutputColumnPair(@"input10", @"input10"),new InputOutputColumnPair(@"input11", @"input11"),new InputOutputColumnPair(@"input12", @"input12"),new InputOutputColumnPair(@"input13", @"input13"),new InputOutputColumnPair(@"input14", @"input14"),new InputOutputColumnPair(@"input15", @"input15"),new InputOutputColumnPair(@"input16", @"input16"),new InputOutputColumnPair(@"input17", @"input17"),new InputOutputColumnPair(@"input18", @"input18"),new InputOutputColumnPair(@"input19", @"input19"),new InputOutputColumnPair(@"input20", @"input20"),new InputOutputColumnPair(@"input21", @"input21"),new InputOutputColumnPair(@"input22", @"input22"),new InputOutputColumnPair(@"input23", @"input23"),new InputOutputColumnPair(@"input24", @"input24"),new InputOutputColumnPair(@"input25", @"input25"),new InputOutputColumnPair(@"input26", @"input26"),new InputOutputColumnPair(@"input27", @"input27"),new InputOutputColumnPair(@"input28", @"input28"),new InputOutputColumnPair(@"input29", @"input29"),new InputOutputColumnPair(@"input30", @"input30"),new InputOutputColumnPair(@"input31", @"input31"),new InputOutputColumnPair(@"input32", @"input32"),new InputOutputColumnPair(@"input33", @"input33"),new InputOutputColumnPair(@"input34", @"input34"),new InputOutputColumnPair(@"input35", @"input35"),new InputOutputColumnPair(@"input36", @"input36"),new InputOutputColumnPair(@"input37", @"input37"),new InputOutputColumnPair(@"input38", @"input38"),new InputOutputColumnPair(@"input39", @"input39"),new InputOutputColumnPair(@"input40", @"input40"),new InputOutputColumnPair(@"input41", @"input41"),new InputOutputColumnPair(@"input42", @"input42"),new InputOutputColumnPair(@"input43", @"input43"),new InputOutputColumnPair(@"input44", @"input44"),new InputOutputColumnPair(@"input45", @"input45"),new InputOutputColumnPair(@"input46", @"input46"),new InputOutputColumnPair(@"input47", @"input47"),new InputOutputColumnPair(@"input48", @"input48"),new InputOutputColumnPair(@"input49", @"input49"),new InputOutputColumnPair(@"input50", @"input50"),new InputOutputColumnPair(@"input51", @"input51"),new InputOutputColumnPair(@"input52", @"input52"),new InputOutputColumnPair(@"input53", @"input53"),new InputOutputColumnPair(@"input54", @"input54"),new InputOutputColumnPair(@"input55", @"input55"),new InputOutputColumnPair(@"input56", @"input56"),new InputOutputColumnPair(@"input57", @"input57"),new InputOutputColumnPair(@"input58", @"input58"),new InputOutputColumnPair(@"input59", @"input59"),new InputOutputColumnPair(@"input60", @"input60"),new InputOutputColumnPair(@"input61", @"input61"),new InputOutputColumnPair(@"input62", @"input62"),new InputOutputColumnPair(@"input63", @"input63"),new InputOutputColumnPair(@"input64", @"input64"),new InputOutputColumnPair(@"input65", @"input65"),new InputOutputColumnPair(@"input66", @"input66"),new InputOutputColumnPair(@"input67", @"input67"),new InputOutputColumnPair(@"input68", @"input68"),new InputOutputColumnPair(@"input69", @"input69"),new InputOutputColumnPair(@"input70", @"input70"),new InputOutputColumnPair(@"input71", @"input71"),new InputOutputColumnPair(@"input72", @"input72"),new InputOutputColumnPair(@"input73", @"input73"),new InputOutputColumnPair(@"input74", @"input74"),new InputOutputColumnPair(@"input75", @"input75"),new InputOutputColumnPair(@"input76", @"input76")})      
                                    .Append(mlContext.Transforms.Concatenate(@"Features", new []{@"input1",@"input2",@"input3",@"input4",@"input5",@"input6",@"input7",@"input8",@"input9",@"input10",@"input11",@"input12",@"input13",@"input14",@"input15",@"input16",@"input17",@"input18",@"input19",@"input20",@"input21",@"input22",@"input23",@"input24",@"input25",@"input26",@"input27",@"input28",@"input29",@"input30",@"input31",@"input32",@"input33",@"input34",@"input35",@"input36",@"input37",@"input38",@"input39",@"input40",@"input41",@"input42",@"input43",@"input44",@"input45",@"input46",@"input47",@"input48",@"input49",@"input50",@"input51",@"input52",@"input53",@"input54",@"input55",@"input56",@"input57",@"input58",@"input59",@"input60",@"input61",@"input62",@"input63",@"input64",@"input65",@"input66",@"input67",@"input68",@"input69",@"input70",@"input71",@"input72",@"input73",@"input74",@"input75",@"input76"}))      
                                    .Append(mlContext.Regression.Trainers.FastForest(new FastForestRegressionTrainer.Options(){NumberOfTrees=4,NumberOfLeaves=4,FeatureFraction=1F,LabelColumnName=@"output",FeatureColumnName=@"Features"}));

            return pipeline;
        }
    }
}
